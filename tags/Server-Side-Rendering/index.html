
<!DOCTYPE html>
<html lang="zh-tw">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="alincode">
    <title>標籤: Server Side Rendering - alincode</title>
    <meta name="author" content="alincode">
    
    
    
    <meta name="description" content="當你的才華還撐不起你的野心時，你就應該靜下心來學習">
<meta property="og:type" content="blog">
<meta property="og:title" content="alincode">
<meta property="og:url" content="http://alincode.github.io/blog/tags/Server-Side-Rendering/index.html">
<meta property="og:site_name" content="alincode">
<meta property="og:description" content="當你的才華還撐不起你的野心時，你就應該靜下心來學習">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="alincode">
<meta name="twitter:description" content="當你的才華還撐不起你的野心時，你就應該靜下心來學習">
    
    
        
    
    
        <meta property="og:image" content="http://alincode.github.io/blog/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/blog/assets/css/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/css/jquery.fancybox.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/css/jquery.fancybox-thumbs.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/css/tranquilpeak.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-74395734-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/blog/ ">alincode</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/blog/#about">
        
        
            <img class="header-picture" src="/blog/assets/images/profile.jpg"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/blog/assets/images/profile.jpg"/>
            </a>
            <span class="sidebar-profile-name">alincode</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首頁</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分類</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">標籤</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">所有文章</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/blog/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">搜尋</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">關於</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/alincode" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:alincode@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Email</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">Atom</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/18/Speed-up-Server-Side-Rendering/">
                            Speed up Server Side Rendering 重點整理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Fri Mar 18 2016 00:00:01 GMT+0800">
	
		    3月 18, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h3 id="為什麼提升-Server-Side-Rendering-速度，這麼困難-3-00"><a href="#為什麼提升-Server-Side-Rendering-速度，這麼困難-3-00" class="headerlink" title="為什麼提升 Server Side Rendering 速度，這麼困難? (3:00)"></a>為什麼提升 Server Side Rendering 速度，這麼困難? (3:00)</h3><ul>
<li>renderToString 有單執行緒、同步、CPU 的限制</li>
<li>server side 和 client side code 混在一起</li>
<li>Facebook 並沒有在 production 做 Server Side Rendering，所以不是核心項目發展緩慢。</li>
</ul>
<h3 id="技巧一：production-mode-5-30"><a href="#技巧一：production-mode-5-30" class="headerlink" title="技巧一：production mode (5:30)"></a>技巧一：production mode (5:30)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=production</span><br></pre></td></tr></table></figure>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>dev mode 有開啟 error checking，使得速度變慢(幾乎三倍)。</p>
<h4 id="缺點"><a href="#缺點" class="headerlink" title="缺點"></a>缺點</h4><p>無</p>
<h3 id="技巧二：使用-React-mini版本-6-55"><a href="#技巧二：使用-React-mini版本-6-55" class="headerlink" title="技巧二：使用 React mini版本 (6:55)"></a>技巧二：使用 React mini版本 (6:55)</h3><p>從</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react-dom/server&#34;</span><br></pre></td></tr></table></figure>
<p>改為</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react/dist/react.min&#34;</span><br></pre></td></tr></table></figure>
<h4 id="原因-8-15"><a href="#原因-8-15" class="headerlink" title="原因 (8:15)"></a>原因 (8:15)</h4><p>減少 NODE_ENV 檢查步驟</p>
<h4 id="缺點-1"><a href="#缺點-1" class="headerlink" title="缺點"></a>缺點</h4><p>很難 debug</p>
<h3 id="技巧三：babel-Transforms-9-05"><a href="#技巧三：babel-Transforms-9-05" class="headerlink" title="技巧三：babel Transforms (9:05)"></a>技巧三：babel Transforms (9:05)</h3><p>添加兩個 babel runtime plugin</p>
<ul>
<li><a href="https://babeljs.io/docs/plugins/transform-react-constant-elements/" target="_blank" rel="external">transforms-react-constant-elements</a></li>
<li><a href="https://babeljs.io/docs/plugins/transform-react-inline-elements/" target="_blank" rel="external">transform-react-inline-elements</a></li>
</ul>
<h4 id="原因-1"><a href="#原因-1" class="headerlink" title="原因"></a>原因</h4><p>減少執行期的計算</p>
<h4 id="缺點-2"><a href="#缺點-2" class="headerlink" title="缺點"></a>缺點</h4><p>必須增加 babel build 的步驟</p>
<h3 id="技巧四：不使用-createClass-12-30"><a href="#技巧四：不使用-createClass-12-30" class="headerlink" title="技巧四：不使用 createClass (12:30)"></a>技巧四：不使用 createClass (12:30)</h3><p>significantly</p>
<p>stateless components</p>
<p>demo 把 ES5 換成 ES6 寫法 (12:40)</p>
<h4 id="原因是什麼？"><a href="#原因是什麼？" class="headerlink" title="原因是什麼？"></a>原因是什麼？</h4><p>也許跟 auto binding 有關，但不確定。</p>
<h4 id="缺點：需要把-ES5-轉換成-ES6-增加工作量，與不知道為什麼有人特別恨-ES6"><a href="#缺點：需要把-ES5-轉換成-ES6-增加工作量，與不知道為什麼有人特別恨-ES6" class="headerlink" title="缺點：需要把 ES5 轉換成 ES6 增加工作量，與不知道為什麼有人特別恨 ES6"></a>缺點：需要把 ES5 轉換成 ES6 增加工作量，與不知道為什麼有人特別恨 ES6</h4><p><a href="https://medium.com/@joshblack/stateless-components-in-react-0-14-f9798f8b992d#.stpbbq76u" target="_blank" rel="external">stateless components</a></p>
<blockquote>
<p>if the components that we defined didn’t have any internal state, then we could just skip extending the base Component class (this is changed in 0.14). Instead, we were able to represent our components as plain classes.</p>
</blockquote>
<h3 id="技巧五：Streaming"><a href="#技巧五：Streaming" class="headerlink" title="技巧五：Streaming"></a>技巧五：Streaming</h3><p>使用講者開發的框架，不產html，直接換成串流下載。</p>
<p>Chunked Encoding HTTP 1.1</p>
<p>從</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react-dom/server&#34;;&#10;&#10;res.send(ReactDOMSerer.renderToString(&#39;&#60;Root/&#62;&#39;));</span><br></pre></td></tr></table></figure>
<p>改為</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react-dom-stream/server&#34;;&#10;&#10;ReactDOMSerer.renderToString(&#39;&#60;Root/&#62;&#39;).pipe(res);</span><br></pre></td></tr></table></figure>
<h4 id="缺點-3"><a href="#缺點-3" class="headerlink" title="缺點"></a>缺點</h4><p>還在 beta，需要小心 CDN 跟 Proxy 方面</p>
<h3 id="技巧六：針對-component-做-cache-22-35"><a href="#技巧六：針對-component-做-cache-22-35" class="headerlink" title="技巧六：針對 component 做 cache (22:35)"></a>技巧六：針對 component 做 cache (22:35)</h3><p>使用講者開發的框架</p>
<h4 id="Demo-Cache-Components-25-17"><a href="#Demo-Cache-Components-25-17" class="headerlink" title="Demo Cache Components (25:17)"></a>Demo Cache Components (25:17)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const cache = new LRURenderCache();&#10;ReactDOMSerer.renderToString(&#39;&#60;Root/&#62;&#39;, &#123;cache: cache&#125;).pipe(res);</span><br></pre></td></tr></table></figure>
<p>增加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componentCacheKey() &#123;&#10;  return JSON.st....&#10;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="缺點：-27-30"><a href="#缺點：-27-30" class="headerlink" title="缺點：(27:30)"></a>缺點：(27:30)</h4><p>如果你的 cache key 有誤，可能會把資料傳送給錯的人。</p>
<h3 id="總結-28-30"><a href="#總結-28-30" class="headerlink" title="總結 (28:30)"></a>總結 (28:30)</h3><p>你應該開始使用哪些技巧<br>技巧一：Yes<br>技巧二：Yes<br>技巧三：Yes<br>技巧四：Maybe<br>技巧五：Maybe<br>技巧六：Not yet</p>
<p><a href="https://www.youtube.com/watch?v=PnpfGy7q96U" target="_blank" rel="external">Reactjs - Speed up Server Side Rendering - Sasha Aickin</a></p>
<p><strong>Vocabulary</strong><br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/downside" target="_blank" rel="external">downside</a>: 缺點<br><a href="http://dictionary.cambridge.org/dictionary/english/suspect" target="_blank" rel="external">suspect</a>: 懷疑<br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/trick_1?q=tricks" target="_blank" rel="external">tricks</a><br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/recap?q=Recap" target="_blank" rel="external">recap</a><br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/coarse_1" target="_blank" rel="external">coarse</a><br><a href="http://dictionary.cambridge.org/dictionary/english/culprit" target="_blank" rel="external">culprit</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/18/Speed-up-Server-Side-Rendering/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 頁 共 1 頁</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 alincode. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/blog/assets/images/profile.jpg"/>
        
            <h4 id="about-card-name">alincode</h4>
        
            <h5 id="about-card-bio"><p>author.bio</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>軟體工程師</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Taiwan
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/blog/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/blog/assets/js/jquery.js" type="text/javascript"></script>
<script src="/blog/assets/js/jquery.fancybox.js" type="text/javascript"></script>
<script src="/blog/assets/js/jquery.fancybox-thumbs.js" type="text/javascript"></script>
<script src="/blog/assets/js/tranquilpeak.js" type="text/javascript"></script>
<!--SCRIPTS END-->



</html>
