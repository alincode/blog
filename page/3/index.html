
<!DOCTYPE html>
<html lang="zh-tw">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="alincode">
    <title>alincode</title>
    <meta name="author" content="alincode">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/blog/atom.xml">
    
    <meta name="description" content="當你的才華還撐不起你的野心時，你就應該靜下心來學習">
<meta property="og:type" content="blog">
<meta property="og:title" content="alincode">
<meta property="og:url" content="http://alincode.github.io/blog/page/3/index.html">
<meta property="og:site_name" content="alincode">
<meta property="og:description" content="當你的才華還撐不起你的野心時，你就應該靜下心來學習">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="alincode">
<meta name="twitter:description" content="當你的才華還撐不起你的野心時，你就應該靜下心來學習">
    
    
        
    
    
        <meta property="og:image" content="http://alincode.github.io/blog/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/blog/assets/css/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/css/jquery.fancybox.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/css/jquery.fancybox-thumbs.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/css/tranquilpeak.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-74395734-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/blog/ ">alincode</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/blog/#about">
        
        
            <img class="header-picture" src="/blog/assets/images/profile.jpg"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/blog/assets/images/profile.jpg"/>
            </a>
            <span class="sidebar-profile-name">alincode</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">首頁</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">分類</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">標籤</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">所有文章</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/blog/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">搜尋</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">關於</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/alincode" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:alincode@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Email</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/blog/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">Atom</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                

<section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/20/JWT-Authentication-with-AngularJS-Forward-4-Web-Summit/">
                            JWT Authentication with AngularJS 重點整理 (1)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sun Mar 20 2016 19:35:42 GMT+0800">
	
		    3月 20, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h3 id="一般-Session-的產生流程-3-10"><a href="#一般-Session-的產生流程-3-10" class="headerlink" title="一般 Session 的產生流程 (3:10)"></a>一般 Session 的產生流程 (3:10)</h3><ul>
<li>瀏覽器發送一個 request 到 server，內含帳號跟密碼</li>
<li>server 驗證帳密後，產生一組 Session ID，存在 Cookie 裡。</li>
<li>將存有 Session ID 的 cookie，回傳給瀏覽器。</li>
<li>瀏覽器在下次與 server 傳遞訊息時，每次都要帶這個 Cookie 給 server</li>
</ul>
<h3 id="Session-識別的問題-3-50"><a href="#Session-識別的問題-3-50" class="headerlink" title="Session 識別的問題(3:50)"></a>Session 識別的問題(3:50)</h3><ul>
<li>難以理解，而且不含意義</li>
<li>增加資料庫的負擔</li>
<li>Perception that cookies are inherently insecure</li>
</ul>
<h3 id="專有名詞介紹-5-10"><a href="#專有名詞介紹-5-10" class="headerlink" title="專有名詞介紹 (5:10)"></a>專有名詞介紹 (5:10)</h3><ul>
<li>Authentication (n.) 驗證</li>
<li>Authorization (n.) 授權</li>
<li>Token</li>
<li>JWT: 是一種 token 格式，常使用在 Outh2 協定的 access token 和 refresh token 流程。</li>
</ul>
<h3 id="JWT-結構-6-55"><a href="#JWT-結構-6-55" class="headerlink" title="JWT 結構 (6:55)"></a>JWT 結構 (6:55)</h3><p>是一個經過 Base64-URL encoded 的字串</p>
<p><strong>結構分三個部分</strong></p>
<ul>
<li>Header</li>
<li>Body(Claims)</li>
<li>Cryptographic Signature 加密簽證</li>
</ul>
<h4 id="解開後的內容"><a href="#解開後的內容" class="headerlink" title="解開後的內容"></a>解開後的內容</h4><p><strong>範例</strong></p>
<ul>
<li>iss: <a href="http://yourdomain.com" target="_blank" rel="external">http://yourdomain.com</a></li>
<li>exp: 60000</li>
<li>sub: userId</li>
<li>scope: api/buy</li>
</ul>
<p><strong>意義</strong></p>
<ul>
<li>iss: 發佈者 (Issuer)</li>
<li>exp: 效期，單位是毫秒 (Expiration Time)</li>
<li>sub: 用戶 (Subject)</li>
<li>scope: 作用域</li>
</ul>
<h3 id="發佈-JWT-流程-11-05"><a href="#發佈-JWT-流程-11-05" class="headerlink" title="發佈 JWT 流程 (11:05)"></a>發佈 JWT 流程 (11:05)</h3><ul>
<li>使用者經過驗證後，取得 Token</li>
<li>由你的 server 來製造 Token</li>
<li>client 儲存 token，並在需要驗證的 request 使用它。</li>
</ul>
<h3 id="概述-JWT-12-15"><a href="#概述-JWT-12-15" class="headerlink" title="概述 JWT (12:15)"></a>概述 JWT (12:15)</h3><ul>
<li>無狀態認證機制</li>
<li>Token 具有作用域的概念</li>
<li>產生授權</li>
<li>決定區域性</li>
</ul>
<p>因為影片實在太長，後面有點不太好理解，分兩篇慢慢看</p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/20/JWT-Authentication-with-AngularJS-Forward-4-Web-Summit/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/19/create-your-own-snippet/">
                            建立自己的 ATOM snippet
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sat Mar 19 2016 20:59:46 GMT+0800">
	
		    3月 19, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>再 ATOM 上有蠻多 Snippet 的 package 可以安裝，不過有時候更新速度不夠快，你還是想要建立自己的，首先開啟 ATOM 然後工具列的地方，點一下 <code>Open Your Snippet</code>。</p>
<img src="/blog/2016/03/19/create-your-own-snippet/tooltip.png" alt="tooltip.png" title="">
<p>它會幫你開啟一個 <code>snippet.cson</code> 的文字檔</p>
<h3 id="Snippet-格式"><a href="#Snippet-格式" class="headerlink" title="Snippet 格式"></a>Snippet 格式</h3><h4 id="簡單範例"><a href="#簡單範例" class="headerlink" title="簡單範例"></a>簡單範例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;.source.js&#39;:&#10;  &#39;print request body&#39;:&#10;    &#39;prefix&#39;: &#39;tb&#39;&#10;    &#39;body&#39;: &#39;console.log(&#34;=== res.body ==&#62;&#34;, res.body);$1&#39;&#10;  &#39;print arrow&#39;:&#10;    &#39;prefix&#39;: &#39;t&#39;&#10;    &#39;body&#39;: &#39;console.log(&#34;==========&#62; &#34;, $1);&#39;</span><br></pre></td></tr></table></figure>
<ul>
<li>source.js 指的是哪種支援哪種副黨名的檔案</li>
<li>prefix 是指快速鍵</li>
<li>body 則是你自己指定的自動產生內容</li>
<li>$1 則是內容產生後，你指標停留的位址，除了 $1 之外，你也可以取 $2，可用 tab 鍵依序切換。</li>
</ul>
<h4 id="更多範例"><a href="#更多範例" class="headerlink" title="更多範例"></a>更多範例</h4><ul>
<li><a href="https://github.com/atom/language-html/blob/master/snippets/language-html.cson" target="_blank" rel="external">language-html.cson</a></li>
<li><a href="https://github.com/atom/language-javascript/blob/master/snippets/language-javascript.cson" target="_blank" rel="external">language-javascript.cson</a></li>
</ul>
<h3 id="參考來源"><a href="#參考來源" class="headerlink" title="參考來源"></a>參考來源</h3><ul>
<li><a href="https://atom.io/docs/latest/using-atom-snippets" target="_blank" rel="external">using-atom-snippets</a></li>
<li><a href="https://atom.io/docs/latest/using-atom-basic-customization#cson" target="_blank" rel="external">Basic Customization</a></li>
</ul>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/19/create-your-own-snippet/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/18/Speed-up-Server-Side-Rendering/">
                            Speed up Server Side Rendering 重點整理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Fri Mar 18 2016 00:00:01 GMT+0800">
	
		    3月 18, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h3 id="為什麼提升-Server-Side-Rendering-速度，這麼困難-3-00"><a href="#為什麼提升-Server-Side-Rendering-速度，這麼困難-3-00" class="headerlink" title="為什麼提升 Server Side Rendering 速度，這麼困難? (3:00)"></a>為什麼提升 Server Side Rendering 速度，這麼困難? (3:00)</h3><ul>
<li>renderToString 有單執行緒、同步、CPU 的限制</li>
<li>server side 和 client side code 混在一起</li>
<li>Facebook 並沒有在 production 做 Server Side Rendering，所以不是核心項目發展緩慢。</li>
</ul>
<h3 id="技巧一：production-mode-5-30"><a href="#技巧一：production-mode-5-30" class="headerlink" title="技巧一：production mode (5:30)"></a>技巧一：production mode (5:30)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=production</span><br></pre></td></tr></table></figure>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>dev mode 有開啟 error checking，使得速度變慢(幾乎三倍)。</p>
<h4 id="缺點"><a href="#缺點" class="headerlink" title="缺點"></a>缺點</h4><p>無</p>
<h3 id="技巧二：使用-React-mini版本-6-55"><a href="#技巧二：使用-React-mini版本-6-55" class="headerlink" title="技巧二：使用 React mini版本 (6:55)"></a>技巧二：使用 React mini版本 (6:55)</h3><p>從</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react-dom/server&#34;</span><br></pre></td></tr></table></figure>
<p>改為</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react/dist/react.min&#34;</span><br></pre></td></tr></table></figure>
<h4 id="原因-8-15"><a href="#原因-8-15" class="headerlink" title="原因 (8:15)"></a>原因 (8:15)</h4><p>減少 NODE_ENV 檢查步驟</p>
<h4 id="缺點-1"><a href="#缺點-1" class="headerlink" title="缺點"></a>缺點</h4><p>很難 debug</p>
<h3 id="技巧三：babel-Transforms-9-05"><a href="#技巧三：babel-Transforms-9-05" class="headerlink" title="技巧三：babel Transforms (9:05)"></a>技巧三：babel Transforms (9:05)</h3><p>添加兩個 babel runtime plugin</p>
<ul>
<li><a href="https://babeljs.io/docs/plugins/transform-react-constant-elements/" target="_blank" rel="external">transforms-react-constant-elements</a></li>
<li><a href="https://babeljs.io/docs/plugins/transform-react-inline-elements/" target="_blank" rel="external">transform-react-inline-elements</a></li>
</ul>
<h4 id="原因-1"><a href="#原因-1" class="headerlink" title="原因"></a>原因</h4><p>減少執行期的計算</p>
<h4 id="缺點-2"><a href="#缺點-2" class="headerlink" title="缺點"></a>缺點</h4><p>必須增加 babel build 的步驟</p>
<h3 id="技巧四：不使用-createClass-12-30"><a href="#技巧四：不使用-createClass-12-30" class="headerlink" title="技巧四：不使用 createClass (12:30)"></a>技巧四：不使用 createClass (12:30)</h3><p><a href="https://medium.com/@joshblack/stateless-components-in-react-0-14-f9798f8b992d#.stpbbq76u" target="_blank" rel="external">stateless components</a></p>
<blockquote>
<p>if the components that we defined didn’t have any internal state, then we could just skip extending the base Component class (this is changed in 0.14). Instead, we were able to represent our components as plain classes.</p>
</blockquote>
<h4 id="demo-把-ES5-換成-ES6-寫法-12-40"><a href="#demo-把-ES5-換成-ES6-寫法-12-40" class="headerlink" title="demo 把 ES5 換成 ES6 寫法 (12:40)"></a>demo 把 ES5 換成 ES6 寫法 (12:40)</h4><h4 id="原因-2"><a href="#原因-2" class="headerlink" title="原因"></a>原因</h4><p>也許跟 auto binding 有關，但不確定。</p>
<h4 id="缺點-3"><a href="#缺點-3" class="headerlink" title="缺點"></a>缺點</h4><p>需要把 ES5 轉換成 ES6 增加工作量，與不知道為什麼有人特別恨 ES6</p>
<h3 id="技巧五：Streaming"><a href="#技巧五：Streaming" class="headerlink" title="技巧五：Streaming"></a>技巧五：Streaming</h3><p>使用講者開發的框架，不產html，直接換成串流下載。</p>
<p>Chunked Encoding HTTP 1.1</p>
<p>從</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react-dom/server&#34;;&#10;&#10;res.send(ReactDOMSerer.renderToString(&#39;&#60;Root/&#62;&#39;));</span><br></pre></td></tr></table></figure>
<p>改為</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ReactDOMSerer from &#34;react-dom-stream/server&#34;;&#10;&#10;ReactDOMSerer.renderToString(&#39;&#60;Root/&#62;&#39;).pipe(res);</span><br></pre></td></tr></table></figure>
<h4 id="缺點-4"><a href="#缺點-4" class="headerlink" title="缺點"></a>缺點</h4><p>還在 beta，需要小心 CDN 跟 Proxy 方面</p>
<h3 id="技巧六：針對-component-做-cache-22-35"><a href="#技巧六：針對-component-做-cache-22-35" class="headerlink" title="技巧六：針對 component 做 cache (22:35)"></a>技巧六：針對 component 做 cache (22:35)</h3><p>使用講者開發的框架</p>
<h4 id="Demo-Cache-Components-25-17"><a href="#Demo-Cache-Components-25-17" class="headerlink" title="Demo Cache Components (25:17)"></a>Demo Cache Components (25:17)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const cache = new LRURenderCache();&#10;ReactDOMSerer.renderToString(&#39;&#60;Root/&#62;&#39;, &#123;cache: cache&#125;).pipe(res);</span><br></pre></td></tr></table></figure>
<p>增加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">componentCacheKey() &#123;&#10;  return JSON.st....&#10;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="缺點：-27-30"><a href="#缺點：-27-30" class="headerlink" title="缺點：(27:30)"></a>缺點：(27:30)</h4><p>如果你的 cache key 有誤，可能會把資料傳送給錯的人。</p>
<h3 id="總結-28-30"><a href="#總結-28-30" class="headerlink" title="總結 (28:30)"></a>總結 (28:30)</h3><p>你應該開始使用哪些技巧<br>技巧一：Yes<br>技巧二：Yes<br>技巧三：Yes<br>技巧四：Maybe<br>技巧五：Maybe<br>技巧六：Not yet</p>
<p>影片：<a href="https://www.youtube.com/watch?v=PnpfGy7q96U" target="_blank" rel="external">Reactjs - Speed up Server Side Rendering - Sasha Aickin</a></p>
<p><strong>Vocabulary</strong><br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/downside" target="_blank" rel="external">downside</a>: 缺點<br><a href="http://dictionary.cambridge.org/dictionary/english/suspect" target="_blank" rel="external">suspect</a>: 懷疑<br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/trick_1?q=tricks" target="_blank" rel="external">tricks</a><br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/recap?q=Recap" target="_blank" rel="external">recap</a><br><a href="http://dictionary.cambridge.org/dictionary/english-chinese-traditional/coarse_1" target="_blank" rel="external">coarse</a><br><a href="http://dictionary.cambridge.org/dictionary/english/culprit" target="_blank" rel="external">culprit</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/18/Speed-up-Server-Side-Rendering/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/17/git-flow-request-pull/">
                            git flow request pull
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Thu Mar 17 2016 00:26:31 GMT+0800">
	
		    3月 17, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>因為專案已經上線了，從原本的 github flow，改用 git flow，這樣才能同時 hotfix 跟調比較大幅度的變動。</p>
<p>github flow 只有一個 master，每個人都發 pull request，由具有 merge 權限的人 code review 後，然後才會 merge 進 master，適合一天多次 release 的專案，不過這總做法，對已上線的系統，只有一個主分支，實務上是不可行的。</p>
<p>git flow 基本上是每個人都可以直接 merge 進 develop，不需發 pr，等 release date，才從 develop 一次 merge 到 master。</p>
<p>不過因為 team 的成員都是 remote 工作者，我想 pull request 這個流程還是有必要的，所以我採用一個混搭模式。</p>
<h2 id="hotfix"><a href="#hotfix" class="headerlink" title="hotfix"></a>hotfix</h2><p>開一個新的分支，開始修 bug</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b hotfix/issue-1 master&#10;git add .&#10;git commit -m &#39;fixed bug&#39;</span><br></pre></td></tr></table></figure>
<h3 id="merge-master"><a href="#merge-master" class="headerlink" title="merge master"></a>merge master</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout master&#10;git merge hotfix/issue-1</span><br></pre></td></tr></table></figure>
<h3 id="merge-develop"><a href="#merge-develop" class="headerlink" title="merge develop"></a>merge develop</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop&#10;git merge hotfix/issue-1</span><br></pre></td></tr></table></figure>
<h3 id="第一個-pull-request"><a href="#第一個-pull-request" class="headerlink" title="第一個 pull request"></a>第一個 pull request</h3><p>base fork: company-repo at master<br>head fork: your-repo at master</p>
<h3 id="第二個-pull-request"><a href="#第二個-pull-request" class="headerlink" title="第二個 pull request"></a>第二個 pull request</h3><p>base fork: company-repo at develop<br>head fork: your-repo at develop</p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/17/git-flow-request-pull/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/16/Request-Entity-Too-Large/">
                            Request Entity Too Large
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Wed Mar 16 2016 23:18:23 GMT+0800">
	
		    3月 16, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>今天在工作的時候遇到，Nginx <code>413 Request Entity Too Large</code> 這個 Error，Google 了一下，解決方式是加大 body size，預設是 1M，所以暫時加到 2M，不過一般這個問題是出現在上傳的情況，但我遇到的情況應該不需要，目前還找不到實際背後的原因，所以先用 work around 的解法，等我找到原因了，再更新這篇文。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client_max_body_size 2M;</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/16/Request-Entity-Too-Large/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/15/Dan-Abramov-Live-React-Hot-Reloading/">
                            Dan Abramov - Live React Hot Reloading 重點整理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Tue Mar 15 2016 23:59:11 GMT+0800">
	
		    3月 15, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><ul>
<li>Atomic Flux with hot reloading</li>
<li>Reducer + Flux</li>
</ul>
<h3 id="開場-1-20"><a href="#開場-1-20" class="headerlink" title="開場 (1:20)"></a>開場 (1:20)</h3><p>講者說明他試著去解決他 workflow 遇到的麻煩，並鼓勵多花一點時間，了解你的開發工具，然後你才可以更專注於你的開發。</p>
<h3 id="現狀的挫折-3-00"><a href="#現狀的挫折-3-00" class="headerlink" title="現狀的挫折 (3:00)"></a>現狀的挫折 (3:00)</h3><ul>
<li>每次改變都需要更新</li>
<li>重複的 state</li>
<li>重複的 action</li>
</ul>
<p>frustration: 挫折<br>status quo : the ​present ​situation</p>
<h3 id="我們可以解決什麼？-3-30"><a href="#我們可以解決什麼？-3-30" class="headerlink" title="我們可以解決什麼？(3:30)"></a>我們可以解決什麼？(3:30)</h3><ul>
<li>多數的變動都不劇烈</li>
<li>Preserve the state</li>
<li>修復錯誤</li>
</ul>
<p>drastic: 劇烈</p>
<h3 id="支援-Hot-loading-的-Tool-4-15"><a href="#支援-Hot-loading-的-Tool-4-15" class="headerlink" title="支援 Hot loading 的 Tool (4:15)"></a>支援 Hot loading 的 Tool (4:15)</h3><ul>
<li>Amok</li>
<li>Figwheel</li>
<li>LiveReactLoad</li>
<li>React Hot Loader</li>
<li>Webpack</li>
</ul>
<h3 id="什麼是-Hot-Reloading？-4-45"><a href="#什麼是-Hot-Reloading？-4-45" class="headerlink" title="什麼是 Hot Reloading？ (4:45)"></a>什麼是 Hot Reloading？ (4:45)</h3><p>講者用了一個 Time Travel 的 Demo 做解說。</p>
<h3 id="每次存檔的時候，都會更新這三個-6-55"><a href="#每次存檔的時候，都會更新這三個-6-55" class="headerlink" title="每次存檔的時候，都會更新這三個 (6:55)"></a>每次存檔的時候，都會更新這三個 (6:55)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Render&#10;ComponentDidUpdate&#10;handleClick</span><br></pre></td></tr></table></figure>
<h3 id="講者之前的-WorkFlow-9-45"><a href="#講者之前的-WorkFlow-9-45" class="headerlink" title="講者之前的 WorkFlow (9:45)"></a>講者之前的 WorkFlow (9:45)</h3><ul>
<li>React Hot loader</li>
<li>Style Loader</li>
<li>Webpack</li>
</ul>
<h3 id="React-Hot-Loader-with-Flux-10-15"><a href="#React-Hot-Loader-with-Flux-10-15" class="headerlink" title="React Hot Loader with Flux (10:15)"></a>React Hot Loader with Flux (10:15)</h3><ul>
<li>Component</li>
<li>Action Creators</li>
<li><del>Stores</del></li>
</ul>
<h3 id="Demo-Store-瘦身-11-15"><a href="#Demo-Store-瘦身-11-15" class="headerlink" title="Demo Store 瘦身 (11:15)"></a>Demo Store 瘦身 (11:15)</h3><p>on a diet: 瘦身</p>
<h3 id="介紹-Reducer-16-11"><a href="#介紹-Reducer-16-11" class="headerlink" title="介紹 Reducer (16:11)"></a>介紹 Reducer (16:11)</h3><p>針對 Store 瘦身，而提出 Reducer 架構。</p>
<h3 id="講者現在的-WorkFlow-26-20"><a href="#講者現在的-WorkFlow-26-20" class="headerlink" title="講者現在的 WorkFlow (26:20)"></a>講者現在的 WorkFlow (26:20)</h3><ul>
<li>Redux</li>
<li>Redux DevTools</li>
<li>React Hot Loader</li>
<li>Webpack</li>
</ul>
<h3 id="demo-redux-native-26-45"><a href="#demo-redux-native-26-45" class="headerlink" title="demo redux native (26:45)"></a>demo redux native (26:45)</h3><h2 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h2><p>Redux 主要提供了 Hot loading 跟 Store 架構的瘦身。</p>
<p><a href="https://www.youtube.com/watch?v=xsSnOQynTHs" target="_blank" rel="external">Dan Abramov - Live React: Hot Reloading with Time Travel at react-europe 2015<br>ReactEurope
</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/15/Dan-Abramov-Live-React-Hot-Reloading/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/14/Rethinking-Web-App-Development/">
                            Rethinking Web App Development 重點整理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Mon Mar 14 2016 22:00:46 GMT+0800">
	
		    3月 14, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>這個影片解釋的非常清楚，為什麼要用 Flux 架構。</p>
<p>另提，我一直誤會 Flux 跟 Redux 是兩個派流，但其實 Flux 是在講一個架構(雖然它也真的有一個框架叫 Flux)，又被騙到了，囧</p>
<p>React : Declarative Views</p>
<p>Flux : 單向資料流(Single directional data flow)</p>
<p>Redux : 有實作 Flux 架構的框架，並增加了 Flux 不足的部分。</p>
<h3 id="MVC-gt-Flux-10-32"><a href="#MVC-gt-Flux-10-32" class="headerlink" title="MVC -&gt; Flux (10:32)"></a>MVC -&gt; Flux (10:32)</h3><h4 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h4><p><code>Action -&gt; Controller -&gt; Model &lt;-&gt; View</code></p>
<h4 id="Flux"><a href="#Flux" class="headerlink" title="Flux"></a>Flux</h4><p>Flux 架構的出現，是為了解決 MVC 架構所遇到的困難，Model 與 View 的互相關聯，太過複雜。</p>
<p>初步的構想為 Action -&gt; Store -&gt; View，最後 Flux 架構為 <code>Action -&gt; Dispatcher -&gt; Store -&gt; View -&gt; Action</code></p>
<h3 id="case-study-12-38"><a href="#case-study-12-38" class="headerlink" title="case study (12:38)"></a>case study (12:38)</h3><p>聊天功能所遇到的問題，兩個區塊的狀態，同時都有 Chat 的 stat 需要同步。</p>
<h3 id="implement-render-22-30"><a href="#implement-render-22-30" class="headerlink" title="implement render (22:30)"></a>implement render (22:30)</h3><p>實作 render 所遇到的困難，傳統做法是用 append 增加新的元素，但這樣要維護 stat 很困難，所以改為 Model 一次 render。</p>
<h3 id="Virtual-DOM-29-40"><a href="#Virtual-DOM-29-40" class="headerlink" title="Virtual DOM (29:40)"></a>Virtual DOM (29:40)</h3><p>為了做到區塊 render 又不損失效率，所以有一個虛擬(Virtual) DOM，可只 render 變動的部分。</p>
<h3 id="Flux-vs-JQuery-41-45"><a href="#Flux-vs-JQuery-41-45" class="headerlink" title="Flux vs JQuery (41:45)"></a>Flux vs JQuery (41:45)</h3><p>Flux 幫你維護了 Stat，在 Flux 只需要考慮 Current Stat，而 JQuery 你需要自己維護每個 Stat。</p>
<p><strong>JQuery render</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;div class=&#34;model&#34;&#62;&#10;  &#60;div&#62;1&#60;/div&#62;&#10;  &#60;div&#62;2&#60;/div&#62;&#10;  &#60;div&#62;3&#60;/div&#62;&#10;&#60;/div&#62;&#10;&#10;$(&#39;.model&#39;).append(&#39;&#60;div&#62;4&#60;/div&#62;&#39;);</span><br></pre></td></tr></table></figure>
<p><strong>Flux render</strong></p>
<p>Flux 的做法是更新 stat，然後 render 整個 model，但有 Virtual DOM，所以實際還是只 render 變動的部分，但我們實作可以更新 Model，其他麻煩事 Flux 會處理好。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;div class=&#34;model&#34;&#62;&#10;  &#60;div&#62;1&#60;/div&#62;&#10;  &#60;div&#62;2&#60;/div&#62;&#10;  &#60;div&#62;3&#60;/div&#62;&#10;&#60;/div&#62;</span><br></pre></td></tr></table></figure>
<p>來源：<a href="https://www.youtube.com/watch?v=nYkdrAPrdcw" target="_blank" rel="external">Hacker Way: Rethinking Web App Development at Facebook</a></p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/14/Rethinking-Web-App-Development/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/13/spa-seo-2/">
                            SPA SEO (2)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sun Mar 13 2016 22:55:08 GMT+0800">
	
		    3月 13, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h3 id="有實作-Isomorphic-的框架"><a href="#有實作-Isomorphic-的框架" class="headerlink" title="有實作 Isomorphic 的框架"></a>有實作 Isomorphic 的框架</h3><p>這裡只列出背後有知名組織支援的框架</p>
<h4 id="Redux-來自-reactjs"><a href="#Redux-來自-reactjs" class="headerlink" title="Redux 來自 reactjs"></a>Redux 來自 reactjs</h4><ul>
<li>Github : <a href="https://github.com/reactjs/redux" target="_blank" rel="external">https://github.com/reactjs/redux</a></li>
</ul>
<h4 id="Fluxible-來自-yahoo"><a href="#Fluxible-來自-yahoo" class="headerlink" title="Fluxible 來自 yahoo"></a>Fluxible 來自 yahoo</h4><ul>
<li>Github : <a href="https://github.com/yahoo/fluxible" target="_blank" rel="external">https://github.com/yahoo/fluxible</a></li>
<li>Website : <a href="http://fluxible.io/" target="_blank" rel="external">http://fluxible.io/</a></li>
</ul>
<h4 id="Relay-來自-facebook"><a href="#Relay-來自-facebook" class="headerlink" title="Relay 來自 facebook"></a>Relay 來自 facebook</h4><ul>
<li>Github : <a href="https://github.com/facebook/relay/" target="_blank" rel="external">https://github.com/facebook/relay/</a></li>
</ul>
<h3 id="幫助你快速開始的工具"><a href="#幫助你快速開始的工具" class="headerlink" title="幫助你快速開始的工具"></a>幫助你快速開始的工具</h3><ul>
<li><a href="https://github.com/webpack/react-starter" target="_blank" rel="external">React Starter</a></li>
<li>generator-fluxible</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yo generator-fluxible</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/13/spa-seo-2/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/12/spa-seo/">
                            SPA SEO (1)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Sat Mar 12 2016 22:38:24 GMT+0800">
	
		    3月 12, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h3 id="SPA-Single-Page-Apps-兩大隱憂"><a href="#SPA-Single-Page-Apps-兩大隱憂" class="headerlink" title="SPA ( Single Page Apps ) 兩大隱憂"></a>SPA ( Single Page Apps ) 兩大隱憂</h3><p><strong>不友善的SEO</strong></p>
<p>由於程式只跑在 client-side，所以 server 並沒有提供爬蟲需要的 HTML 資料。</p>
<p><strong>效率(Performance)</strong></p>
<p>由於要等整包 client-side 的 js 內下載完之後，才會在瀏覽器 render html，所以第一次的開啟速度會很慢。</p>
<p>目前各框架提供的解決方案就是做 <code>Server Side Rendering</code>，那現在不只有 client-side，多了一個 Server Side，它們要做的事基本是一樣的，所以共用的地方會很多，所以就提出了 <code>universal web application</code> 的概念。</p>
<h3 id="Isomorphic-universal-JavaScript"><a href="#Isomorphic-universal-JavaScript" class="headerlink" title="Isomorphic ( universal ) JavaScript"></a>Isomorphic ( universal ) JavaScript</h3><p>一開始看到這個字的時候(之後又更名為 universal)，很容易以為這是一個新的框架，但其實它是只一個概念，而有很多框架去實踐了這個概念，例如<code>fluxible</code>，可以在新舊文章穿插看到這兩個字眼，其實是在講同件事。</p>
<p>我們來看看 <a href="http://isomorphic.net/javascript" target="_blank" rel="external">http://isomorphic.net/javascript</a> 上對於這個字的定義</p>
<blockquote>
<p>JavaScript applications which run both client-side and server-side. Isomorphic JavaScript frameworks are the next step in the evolution of JavaScript frameworks. These new libraries and frameworks are solving the problems associated with traditional JavaScript frameworks.</p>
</blockquote>
<p>一個 JavaScript 的應用程式，可以同時跑在 client-side 和 server-side，Isomorphic JavaScript frameworks 是 JavaScript frameworks 下一階段的演化，這些新的 libraries 和 框架解決了傳統 JavaScript frameworks 的問題。</p>
<p><strong>tips</strong></p>
<ul>
<li>isomorphic : 同構</li>
<li>universal : 通用</li>
</ul>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/12/spa-seo/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/blog/2016/03/11/controller-vs-service/">
                            controller vs service
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" content="Fri Mar 11 2016 21:17:33 GMT+0800">
	
		    3月 11, 2016
    	
    </time>
    
</div>
            </div>
            
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>大家都在談 MVC，但我想先談談更基本的東西，那就是 controller 和 service 的職責，不管寫了幾年的 code，總是會不停看到，應該寫在 service 的邏輯放在 controller 中，應該寫在 service 的 code 寫在 controller 中。</p>
<p>大多數的人都說 controller 就是負責流程控制，service 負責商業邏輯，但什麼是流程控制，什麼是商業邏輯，老實說剛寫個幾年程式哪聽的懂，有些事呢，就是要自己受過折磨，才能深刻體會。</p>
<h2 id="controller-的責任"><a href="#controller-的責任" class="headerlink" title="controller 的責任"></a>controller 的責任</h2><h3 id="做值的檢查"><a href="#做值的檢查" class="headerlink" title="做值的檢查"></a>做值的檢查</h3><ul>
<li>xxx != null</li>
<li>xxx &gt; 0</li>
</ul>
<h3 id="決定走哪個-view-或-response-http-code，接-Error"><a href="#決定走哪個-view-或-response-http-code，接-Error" class="headerlink" title="決定走哪個 view 或 response http code，接 Error"></a>決定走哪個 view 或 response http code，接 Error</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create : async(req,res) =&#62; &#123;&#10;  try&#123;&#10;    // &#30053;...&#10;    if(product)&#123;&#10;      return res.view(&#34;success_view&#34;);&#10;    &#125;else&#123;&#10;      return res.view(&#34;fail_view&#34;);&#10;    &#125;&#10;  &#125; catch(e)&#123;&#10;    return res.serverError(e);&#10;  &#125;&#10;&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="呼叫-service"><a href="#呼叫-service" class="headerlink" title="呼叫 service"></a>呼叫 service</h3><p>並只傳內容物(Object Data 或 簡單型別值) 給 service。除了一些特例，牽涉到 session、cookie、request header 特定的邏輯，但大多遇到的情況都不需要，誤用居多。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OrderService.create(req); // (X)&#10;OrderService.create(req.order); // (O)</span><br></pre></td></tr></table></figure>
<h2 id="service-的責任"><a href="#service-的責任" class="headerlink" title="service 的責任"></a>service 的責任</h2><h3 id="商業邏輯"><a href="#商業邏輯" class="headerlink" title="商業邏輯"></a>商業邏輯</h3><p>(e.g. 寄信、訂單計算、與第三方平台溝通…)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getServiceFee : async(user, order) =&#62; &#123;&#10;  let isVip = UserService.isVip(user);&#10;  if(order.paymentTotalAmount &#62; 1000 || isVip )&#123;&#10;    return 0; // &#20813;&#36939;&#10;  &#125;else&#123;&#10;    return 70;&#10;  &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="複雜的物件生成"><a href="#複雜的物件生成" class="headerlink" title="複雜的物件生成"></a>複雜的物件生成</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getNewUser : async(...&#30053;...) =&#62; &#123;&#10;  let newUser = &#123;&#10;    username: newUserParams.username || email,&#10;    email: email,&#10;    fullName: newUserParams.fullName,&#10;    gender: newUserParams.gender || &#39;none&#39;,&#10;    RoleId: role.id,&#10;    mobile: newUserParams.mobile,&#10;    city: newUserParams.city,&#10;    region: newUserParams.region,&#10;    zipcode: newUserParams.zipcode,&#10;    address: newUserParams.address,&#10;    privacyTermsAgree: newUserParams.privacyTermsAgree || false,&#10;    subscription: newUserParams.subscription || false,&#10;  &#125;&#10;  return newUser;&#10;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="與資料庫溝通"><a href="#與資料庫溝通" class="headerlink" title="與資料庫溝通"></a>與資料庫溝通</h3><p>如果有 Dao 的架構的話，可以呼叫 Dao 的 method，如果沒有 Dao 的架構，那 Dao 所做的事，就可以在這裡做。</p>
<h3 id="略…"><a href="#略…" class="headerlink" title="略…"></a>略…</h3><h2 id="這樣做的好處是什麼？"><a href="#這樣做的好處是什麼？" class="headerlink" title="這樣做的好處是什麼？"></a>這樣做的好處是什麼？</h2><h3 id="職責分明，減少重複的code"><a href="#職責分明，減少重複的code" class="headerlink" title="職責分明，減少重複的code"></a>職責分明，減少重複的code</h3><p>如果 controller 跟 service 都要做值的檢查，那不是重工？如果有時候把檢查放在 controller，有時候放在 service，那有沒有哪一天，根本忘了做值的檢查，所以遊戲規則要先講好。</p>
<p>減少重工的部分，可以看看 <a href="http://www.books.com.tw/products/0010579897" target="_blank" rel="external">Clean Code</a> 這本書，如果沒看過 Clean code，可以先看看 <a href="http://www.books.com.tw/products/0010611737" target="_blank" rel="external">Kent Beck的實作模式</a>，比較薄，而且談的東西，好像都可以馬上運用在工作中，Clean Code 有些例子真的有點太極端，即使了解了，也很難完全實行，而且看完後，你會覺得兩本書提到的理論，有會相衝突的地方很有趣。</p>
<h3 id="易於測試"><a href="#易於測試" class="headerlink" title="易於測試"></a>易於測試</h3><p>如果 controller 把 request 當參數傳給 service，那你 service 的測試 code，不就要寫得跟 controller 一樣？(重工) 所以只傳 Object data 跟 簡單型別值，你的測試會比較好寫。在者，並不是只有HTTP一種協定，如果現在變成接 Socket，那 service 不就不能共用。</p>
<h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>每個 Pattern 都是為了解決一些前輩的問題，而演變而成的，多多讀讀 Pattern 就可以少踩一些雷，多希望我能更早領悟這個道理。</p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/03/11/controller-vs-service/#post-footer" class="postShorten-excerpt_link link">
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        <li class="pagination-prev">
            
                <a class="btn btn--default btn--small" href="/blog/page/2/">
            
                <i class="fa fa-angle-left text-base icon-mr"></i>
                    <span>上一頁</span>
            </a>
        </li>
        
        
        <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/blog/page/4/">
                    <span>下一頁</span>
                <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
        </li>
        
        <li class="pagination-number">第 3 頁 共 5 頁</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 alincode. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/blog/assets/images/profile.jpg"/>
        
            <h4 id="about-card-name">alincode</h4>
        
            <h5 id="about-card-bio"><p>author.bio</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>軟體工程師</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Taiwan
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/blog/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/blog/assets/js/jquery.js" type="text/javascript"></script>
<script src="/blog/assets/js/jquery.fancybox.js" type="text/javascript"></script>
<script src="/blog/assets/js/jquery.fancybox-thumbs.js" type="text/javascript"></script>
<script src="/blog/assets/js/tranquilpeak.js" type="text/javascript"></script>
<!--SCRIPTS END-->



</html>
